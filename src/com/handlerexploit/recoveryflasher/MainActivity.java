package com.handlerexploit.recoveryflasher;

import com.handlerexploit.recoveryflasher.models.ExtendedDevice;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity {
    
    private static final String TAG = MainActivity.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        
        new NetworkOperationsTask().execute(Device.values());
    }
    
    public static enum Device {
        CLIQ("Motorola Cliq", "http://dl.dropbox.com/u/788286/com.adlx.recoveryflasher/motorola.mb200.json"),
        CLIQXT("Motorola CliqXT", "http://dl.dropbox.com/u/788286/com.adlx.recoveryflasher/motorola.mb501.json");
        
        private String name;
        private String url;
        
        Device(String name, String url) {
            this.name = name;
            this.url = url;
        }
        
        public String getName() {
            return name;
        }
        
        public String getUrl() {
            return url;
        }
    }
    
    private static class NetworkOperationsTask extends AsyncTask<Device, Void, Void> {

        @Override
        protected Void doInBackground(Device... params) {
            for (Device device : params) {
                ExtendedDevice extendedDevice = Parser.requestExtendedDevice(device);
                Log.d(TAG, "Device : " + extendedDevice.getName() + ", number of recoveries retrieved is " + extendedDevice.getRecoveries().size());
            }
            return null;
        }
        
    }
}